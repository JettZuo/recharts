<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>recharts: 百度ECharts的R语言接口</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/htmlwidgets-0.7/htmlwidgets.js"></script>
<script src="libs/echarts-2.2.7/echarts-all.js"></script>
<script src="libs/echarts-2.2.7/ext/params.js"></script>
<script src="libs/echarts-2.2.7/ext/loadGeoJSON.js"></script>
<script src="libs/echarts-binding-0.0.5/echarts.js"></script>
<script src="libs/echarts-module-2.2.7/base.js"></script>
<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 70px;
}
p code {
  white-space: inherit;
}
.html-widget-static-bound {
  margin: auto;
}
.alert>p {
  margin-bottom: 10.5px;
}
</style>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="libs/highlight/default.css"
      type="text/css" />
<script src="libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="./">recharts</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="./">Home</a></li>
        <li><a href="index_cn.html">首页</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/madlogos/recharts" title="View Source on Github"><i class="fa fa-github fa-lg"></i></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</nav><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">recharts: 百度ECharts的R语言接口</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#knowledge-map"><span class="toc-section-number">1</span> 知识地图Knowledge Map</a></li>
<li><a href="#hello-world"><span class="toc-section-number">2</span> Hello World</a></li>
<li><a href="#quick-start"><span class="toc-section-number">3</span> 快速入门Quick Start</a><ul>
<li><a href="#data"><span class="toc-section-number">3.1</span> 数据Data</a></li>
<li><a href="#core-chart"><span class="toc-section-number">3.2</span> 基础图形Core Chart</a><ul>
<li><a href="#arguments"><span class="toc-section-number">3.2.1</span> 参数Arguments</a></li>
<li><a href="#supported-chart-types"><span class="toc-section-number">3.2.2</span> 支持的图类型Supported Chart Types</a></li>
<li><a href="#special-notes"><span class="toc-section-number">3.2.3</span> 特别注意Special Notes</a><ul>
<li><a href="#param-list"><span class="toc-section-number">3.2.3.1</span> 参数列表Param List</a></li>
<li><a href="#data-requirements"><span class="toc-section-number">3.2.3.2</span> 数据要求Data Requirements</a></li>
<li><a href="#typesubtype"><span class="toc-section-number">3.2.3.3</span> 图类和亚类Type/Subtype</a></li>
</ul></li>
</ul></li>
<li><a href="#modify-the-chart"><span class="toc-section-number">3.3</span> 修改作图Modify the Chart</a><ul>
<li><a href="#tune-series"><span class="toc-section-number">3.3.1</span> 调整Tune Series</a></li>
<li><a href="#markline"><span class="toc-section-number">3.3.2</span> 标注线markLine</a></li>
<li><a href="#markpoint"><span class="toc-section-number">3.3.3</span> 标注点markPoint</a></li>
<li><a href="#title"><span class="toc-section-number">3.3.4</span> 标题Title</a></li>
<li><a href="#legend"><span class="toc-section-number">3.3.5</span> 图例Legend</a></li>
<li><a href="#toolbox"><span class="toc-section-number">3.3.6</span> 工具箱Toolbox</a></li>
<li><a href="#datazoom"><span class="toc-section-number">3.3.7</span> 数据缩放漫游DataZoom</a></li>
<li><a href="#axis"><span class="toc-section-number">3.3.8</span> 坐标轴Axis</a></li>
</ul></li>
<li><a href="#fortify-the-chart"><span class="toc-section-number">3.4</span> 美化Fortify the Chart</a><ul>
<li><a href="#theme"><span class="toc-section-number">3.4.1</span> 主题Theme</a></li>
<li><a href="#symbols"><span class="toc-section-number">3.4.2</span> 图标Symbols</a></li>
</ul></li>
<li><a href="#altogether"><span class="toc-section-number">3.5</span> 合起来Altogether</a></li>
</ul></li>
<li><a href="#low-level-api"><span class="toc-section-number">4</span> Low-level API</a><ul>
<li><a href="#de-novo"><span class="toc-section-number">4.1</span> 从头创建De Novo</a></li>
<li><a href="#echartsmodify-the-echarts-object"><span class="toc-section-number">4.2</span> 修改Echarts对象Modify the Echarts Object</a></li>
</ul></li>
<li><a href="#finale"><span class="toc-section-number">5</span> 结语Finale</a></li>
</ul>
</div>

<hr />
<div class="alert alert-warning">
<p><strong>注意:</strong>本加载包仍在开发完善中。recharts基于百度Echarts2的最后一个稳定发布版(v2.2.7)开发。本文档始终反映<strong>recharts</strong>最新的特性(<a href="https://github.com/madlogos/recharts">Github</a>)。安装方法：</p>
<pre class="r"><code>if (!require(devtools)) library(devtools)
install_github(&quot;madlogos/recharts&quot;)</code></pre>
</div>
<div id="knowledge-map" class="section level1">
<h1><span class="header-section-number">1</span> 知识地图Knowledge Map</h1>
<ol style="list-style-type: decimal">
<li>基本图类
<ol style="list-style-type: decimal">
<li>单个坐标系
<ol style="list-style-type: decimal">
<li>直角坐标系
<ol style="list-style-type: decimal">
<li><a href="Basic_Plots_01_Scatterplot_cn.html">散点图Scatter/气泡图Bubble Plot</a></li>
<li><a href="Basic_Plots_02_Bar_cn.html">条图Bar/柱图Column Chart</a></li>
<li><a href="Basic_Plots_03_Line_cn.html">线图Line/面积图Area Chart</a></li>
<li><a href="Basic_Plots_04_K_cn.html">蜡烛图/K线图Candlestick/K Chart</a></li>
<li><a href="Basic_Plots_05_eventRiver_cn.html">事件河流图Event River Chart</a></li>
</ol></li>
<li>其他
<ol style="list-style-type: decimal">
<li><a href="Basic_Plots_11_Force_cn.html">力导向布局图Force Chart</a></li>
<li><a href="Basic_Plots_12_Chord_cn.html">和弦图Chord Chart</a></li>
<li><a href="Basic_Plots_13_WordCloud_cn.html">词云Word Cloud</a></li>
<li><a href="Basic_Plots_14_Venn_cn.html">韦恩图Venn Chart</a></li>
<li><a href="Basic_Plots_15_Heatmap_cn.html">热力图Heatmap</a></li>
</ol></li>
</ol></li>
<li>多个坐标系
<ol style="list-style-type: decimal">
<li>极坐标系
<ol style="list-style-type: decimal">
<li><a href="Basic_Plots_21_Pie_cn.html">饼图Pie/环状图Ring/玫瑰图Rose Chart</a></li>
<li><a href="Basic_Plots_22_Funnel_cn.html">漏斗图Funnel/金字塔图Pyramid Chart</a></li>
<li><a href="Basic_Plots_23_Radar_cn.html">雷达图Radar Chart</a></li>
<li><a href="Basic_Plots_24_Gauge_cn.html">仪表盘Gauge Chart</a></li>
</ol></li>
<li>其他
<ol style="list-style-type: decimal">
<li><a href="Basic_Plots_31_Map_cn.html">地图Map</a></li>
<li><a href="Basic_Plots_32_Tree_cn.html">树图Tree Chart</a></li>
<li><a href="Basic_Plots_33_Treemap_cn.html">矩形树图Treemap</a></li>
</ol></li>
</ol></li>
</ol></li>
<li><a href="Mixed_Plots_cn.html">混合图类</a></li>
<li>坐标轴/控件配置
<ol style="list-style-type: decimal">
<li>调整数据系列
<ol style="list-style-type: decimal">
<li><a href="setSeries_cn.html">设置系列<code>setSeries</code></a></li>
</ol></li>
<li>坐标轴/制图区
<ol style="list-style-type: decimal">
<li><a href="Widget_01_Axis_cn.html">设置坐标轴<code>setAxis</code></a></li>
<li><a href="Widget_02_Polar_cn.html">设置极坐标系<code>setPolar</code></a></li>
<li><a href="Widget_03_Grid_cn.html">设置绘图区<code>setGrid</code></a></li>
</ol></li>
<li>图形元件
<ol style="list-style-type: decimal">
<li><a href="Widget_11_markLine_cn.html">添加标注线<code>addMarkLine</code></a></li>
<li><a href="Widget_12_markPoint_cn.html">添加标注点<code>addMarkPoint</code></a></li>
</ol></li>
<li>控件
<ol style="list-style-type: decimal">
<li><a href="Widget_21_Title_cn.html">设置标题<code>setTitle</code></a></li>
<li><a href="Widget_22_Legend_cn.html">设置图例<code>setLegend</code></a></li>
<li><a href="Widget_23_Timeline_cn.html">设置时间轴<code>setTimeline</code></a></li>
<li><a href="Widget_24_Toolbox_cn.html">设置工具箱<code>setToolbox</code></a></li>
<li><a href="Widget_25_DataRange_cn.html">设置值域选择<code>setDataRange</code></a></li>
<li><a href="Widget_26_DataZoom_cn.html">设置缩放漫游<code>setDataZoom</code></a></li>
<li><a href="Widget_27_RoamController_cn.html">设置地图漫游<code>setRoam</code></a></li>
</ol></li>
<li>样式特性
<ol style="list-style-type: decimal">
<li><a href="aesStyle_cn.html">样式<code>aesStyle</code></a></li>
</ol></li>
</ol></li>
<li>美工
<ol style="list-style-type: decimal">
<li><a href="Widget_31_Tooltip_cn.html">设置提示框<code>setTooltip</code></a></li>
<li><a href="Widget_32_SymbolList_cn.html">设置符号<code>setSymbols</code></a></li>
<li><a href="Widget_33_Theme_cn.html">设置主题<code>setTheme</code></a></li>
</ol></li>
<li><a href="Cust_Plots_cn.html">定制化</a></li>
</ol>
</div>
<div id="hello-world" class="section level1">
<h1><span class="header-section-number">2</span> Hello World</h1>
<p><strong>recharts</strong>是一个用于可视化的R加载包，它提供了一套面向JavaScript库<a href="http://echarts.baidu.com/echarts2">ECharts2</a>的接口。此包的目的是让R用户即便不精通HTML或JavaScript，也能用很少的代码做出Echarts交互图——当然，懂一点JavaScript的话会更如虎添翼。下面这个散点图展示了本包的基本语法：</p>
<pre class="r"><code>library(recharts)
echartr(iris, ~Sepal.Length, ~Sepal.Width, series = ~Species)</code></pre>
<div id="echarts-9f8c958693b34e39e5b690764bc3f204b25614cd" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-9f8c958693b34e39e5b690764bc3f204b25614cd">{"x":{"series":[{"name":"setosa","type":"scatter","data":[[5.1,3.5],[4.9,3],[4.7,3.2],[4.6,3.1],[5,3.6],[5.4,3.9],[4.6,3.4],[5,3.4],[4.4,2.9],[4.9,3.1],[5.4,3.7],[4.8,3.4],[4.8,3],[4.3,3],[5.8,4],[5.7,4.4],[5.4,3.9],[5.1,3.5],[5.7,3.8],[5.1,3.8],[5.4,3.4],[5.1,3.7],[4.6,3.6],[5.1,3.3],[4.8,3.4],[5,3],[5,3.4],[5.2,3.5],[5.2,3.4],[4.7,3.2],[4.8,3.1],[5.4,3.4],[5.2,4.1],[5.5,4.2],[4.9,3.1],[5,3.2],[5.5,3.5],[4.9,3.6],[4.4,3],[5.1,3.4],[5,3.5],[4.5,2.3],[4.4,3.2],[5,3.5],[5.1,3.8],[4.8,3],[5.1,3.8],[4.6,3.2],[5.3,3.7],[5,3.3]]},{"name":"versicolor","type":"scatter","data":[[7,3.2],[6.4,3.2],[6.9,3.1],[5.5,2.3],[6.5,2.8],[5.7,2.8],[6.3,3.3],[4.9,2.4],[6.6,2.9],[5.2,2.7],[5,2],[5.9,3],[6,2.2],[6.1,2.9],[5.6,2.9],[6.7,3.1],[5.6,3],[5.8,2.7],[6.2,2.2],[5.6,2.5],[5.9,3.2],[6.1,2.8],[6.3,2.5],[6.1,2.8],[6.4,2.9],[6.6,3],[6.8,2.8],[6.7,3],[6,2.9],[5.7,2.6],[5.5,2.4],[5.5,2.4],[5.8,2.7],[6,2.7],[5.4,3],[6,3.4],[6.7,3.1],[6.3,2.3],[5.6,3],[5.5,2.5],[5.5,2.6],[6.1,3],[5.8,2.6],[5,2.3],[5.6,2.7],[5.7,3],[5.7,2.9],[6.2,2.9],[5.1,2.5],[5.7,2.8]]},{"name":"virginica","type":"scatter","data":[[6.3,3.3],[5.8,2.7],[7.1,3],[6.3,2.9],[6.5,3],[7.6,3],[4.9,2.5],[7.3,2.9],[6.7,2.5],[7.2,3.6],[6.5,3.2],[6.4,2.7],[6.8,3],[5.7,2.5],[5.8,2.8],[6.4,3.2],[6.5,3],[7.7,3.8],[7.7,2.6],[6,2.2],[6.9,3.2],[5.6,2.8],[7.7,2.8],[6.3,2.7],[6.7,3.3],[7.2,3.2],[6.2,2.8],[6.1,3],[6.4,2.8],[7.2,3],[7.4,2.8],[7.9,3.8],[6.4,2.8],[6.3,2.8],[6.1,2.6],[7.7,3],[6.3,3.4],[6.4,3.1],[6,3],[6.9,3.1],[6.7,3.1],[6.9,3.1],[5.8,2.7],[6.8,3.2],[6.7,3.3],[6.7,3],[6.3,2.5],[6.5,3],[6.2,3.4],[5.9,3]]}],"legend":{"show":true,"data":["setosa","versicolor","virginica"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"Sepal.Length","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"Sepal.Length","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p><strong>recharts</strong>建基于<a href="http://htmlwidgets.org"><strong>htmlwidgets</strong></a>包之上，这样做的优点是极大地节省了开发者管理JavaScript依赖包和处理不同类型的输出文档（如R Markdown和Shiny）的时间。你只需要创建一幅图，而如何输出这幅图（无论R Markdown, Shiny, 还是R控制台/ RStudio）则交由htmlwidgets来处理。</p>
<p>此包的主函数是<code>echartr()</code>和S3通用函数<code>echart()</code>。在设计宗旨上，我们希望它们能自动处理不同类型的R数据。比如，当把一个数据框传入<code>echart()</code>，而<code>x</code>/<code>y</code>变量均为数值型，它们会自动适配散点图，并自动生成对应的坐标轴。当然，你也可以覆盖自动适配的结果。</p>
</div>
<div id="quick-start" class="section level1">
<h1><span class="header-section-number">3</span> 快速入门Quick Start</h1>
<p>试着按下面的步骤制作你的第一幅Echarts交互图。</p>
<div id="data" class="section level2">
<h2><span class="header-section-number">3.1</span> 数据Data</h2>
<p>制图总是始于数据本身。我们用<code>datasets</code>包自带的<code>mtcars</code>数据集。你可以输入命令<code>?mtcars</code>查看数据集的结构。</p>
<pre class="r"><code>head(mtcars)</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>我们想知道<code>wt</code> (weight)和<code>mpg</code> (miles per gallon)的关联，那么散点图是一个不错的选择。这要求x和y都是数值型。</p>
</div>
<div id="core-chart" class="section level2">
<h2><span class="header-section-number">3.2</span> 基础图形Core Chart</h2>
<p>用<code>echartr</code>构建基础图形。</p>
<pre class="r"><code>echartr(mtcars, wt, mpg)</code></pre>
<div id="echarts-fc5035a9f367c973b2b79e3db57f2726acddc975" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-fc5035a9f367c973b2b79e3db57f2726acddc975">{"x":{"series":[{"type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.2,32.4],[1.615,30.4],[1.835,33.9],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"legend":{"show":true,"data":[],"x":"left","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p><code>echartr</code>的语法是：</p>
<pre><code>## function (data, x = NULL, y = NULL, series = NULL, weight = NULL, 
##     z = NULL, lat = NULL, lng = NULL, type = &quot;auto&quot;, subtype = NULL, 
##     ...)</code></pre>
<div id="arguments" class="section level3">
<h3><span class="header-section-number">3.2.1</span> 参数Arguments</h3>
<table>
<colgroup>
<col width="15%" />
<col width="84%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">参数</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p><strong>data</strong></p></td>
<td align="left"><p>源数据，必须是数据框</p></td>
</tr>
<tr class="even">
<td align="left"><p>x</p></td>
<td align="left"><p>自变量。<code>data</code>的一列或多列。可以是时间、数值或文本型。</p>
<ul>
<li>直角坐标系里，<code>x</code>与x轴关联</li>
<li>在极坐标系，<code>x</code>的第一变量与极坐标关联，<code>x</code>的第二变量为数据系列(映射到图例)</li>
<li>其他类型中，单坐标系可参考直角坐标系的例子，而多坐标系可参考极坐标系的例子。</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>y</p></td>
<td align="left"><p>应变量，<code>data</code>的一列或多列。始终为数值型。</p></td>
</tr>
<tr class="even">
<td align="left"><p>series</p></td>
<td align="left"><p>分组变量，<code>data</code>的某一列。进行运算时被视作因子。</p>
<ul>
<li>直角坐标系里，<code>series</code>为数据系列 (映射到图例)。</li>
<li>极坐标系里，<code>series</code>映射到极坐标系的索引值。</li>
<li>其他类型中，单坐标系可参考直角坐标系的例子，而多坐标系可参考极坐标系的例子。</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>weight</p></td>
<td align="left"><p>权重变量，在气泡图、线图、柱图中与图形大小关联。</p></td>
</tr>
<tr class="even">
<td align="left"><p>z</p></td>
<td align="left"><p>时间轴变量。一旦指定<code>z</code>变量，就会生成时间轴组件。</p></td>
</tr>
<tr class="odd">
<td align="left"><p>lat</p></td>
<td align="left"><p>纬度，用于地图/热力图</p></td>
</tr>
<tr class="even">
<td align="left"><p>lng</p></td>
<td align="left"><p>经度，用于地图/热力图</p></td>
</tr>
<tr class="odd">
<td align="left"><p>type</p></td>
<td align="left"><p>图类型，默认为’auto’。<code>type</code>作为向量传入时，映射到<code>series</code>向量。</p></td>
</tr>
<tr class="even">
<td align="left"><p>subtype</p></td>
<td align="left"><p>图亚类，默认为NULL。<code>subtype</code>作为向量传入时，映射到<code>series</code>向量。</p></td>
</tr>
</tbody>
</table>
</div>
<div id="supported-chart-types" class="section level3">
<h3><span class="header-section-number">3.2.2</span> 支持的图类型Supported Chart Types</h3>
<p><code>echartr</code>目前支持下列图类型 (’name’列的正则样式，不分大小写)。’type’列则是目前Echarts2所支持的图类型。</p>
<pre class="r"><code>knitr::kable(recharts:::validChartTypes[,c(1:3,5)])</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="left">type</th>
<th align="left">misc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">^(scatter|point)$</td>
<td align="left">scatter</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">^(bubble)$</td>
<td align="left">scatter</td>
<td align="left">bubble</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">^(bar|hbar)$</td>
<td align="left">bar</td>
<td align="left">flip</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">^(vbar|column)$</td>
<td align="left">bar</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">^(histogram|hist)$</td>
<td align="left">bar</td>
<td align="left">hist</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">^(line)$</td>
<td align="left">line</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">^(curve)$</td>
<td align="left">line</td>
<td align="left">smooth</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">^(area)$</td>
<td align="left">line</td>
<td align="left">fill</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">^(wave)$</td>
<td align="left">line</td>
<td align="left">fill_smooth</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">^(map_world|world_map)$</td>
<td align="left">map</td>
<td align="left">world</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">^(map_china|china_map)$</td>
<td align="left">map</td>
<td align="left">china</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">^(map_world_multi|world_map_multi)$</td>
<td align="left">map</td>
<td align="left">world_multi</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">^(map_china_multi|china_map_multi)$</td>
<td align="left">map</td>
<td align="left">china_multi</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="left">^(map)$</td>
<td align="left">map</td>
<td align="left">geojson</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="left">^(k|candlestick)$</td>
<td align="left">k</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="left">^(pie)$</td>
<td align="left">pie</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="left">^(ring)$</td>
<td align="left">pie</td>
<td align="left">ring</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="left">^(rose)$</td>
<td align="left">pie</td>
<td align="left">rose</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="left">^(chord)$</td>
<td align="left">chord</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="left">^(force|force_curve)$</td>
<td align="left">force</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="left">^(force_line)$</td>
<td align="left">force</td>
<td align="left">line</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">^(funnel)$</td>
<td align="left">funnel</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="left">^(pyramid)$</td>
<td align="left">funnel</td>
<td align="left">ascending</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="left">^(tree|vtree|tree_vertical)$</td>
<td align="left">tree</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="left">^(htree|tree_horizontal)$</td>
<td align="left">tree</td>
<td align="left">horizontal</td>
</tr>
<tr class="even">
<td align="right">26</td>
<td align="left">^(tree_inv|vtree_inv|tree_vertical_inv)$</td>
<td align="left">tree</td>
<td align="left">inv</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="left">^(htree_inv|tree_horizontal_inv)$</td>
<td align="left">tree</td>
<td align="left">horizontal_inv</td>
</tr>
<tr class="even">
<td align="right">28</td>
<td align="left">^(treemap)$</td>
<td align="left">treemap</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">29</td>
<td align="left">^(wordcloud)$</td>
<td align="left">wordCloud</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">30</td>
<td align="left">^(heatmap)$</td>
<td align="left">heatmap</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="left">^(radar|spider|star)$</td>
<td align="left">radar</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="left">^(gauge|dashboard)$</td>
<td align="left">gauge</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">33</td>
<td align="left">^(eventriver)$</td>
<td align="left">eventRiver</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">34</td>
<td align="left">^(venn)$</td>
<td align="left">venn</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>指定<code>data</code>以及<code>x</code>、<code>y</code>，<code>echartr</code>就会自动调用<code>recharts:::series_scatter</code>函数处理数据。</p>
<p>如果指定<code>series</code>，就会产生一幅分组散点图。</p>
<pre class="r"><code>echartr(mtcars, wt, mpg, factor(am, labels=c(&#39;Automatic&#39;, &#39;Manual&#39;)))</code></pre>
<div id="echarts-d69be2d7e97ff79a59e3cf4fde25fa881592816e" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-d69be2d7e97ff79a59e3cf4fde25fa881592816e">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p>如果指定<code>weight</code>，并设<code>type</code>为<code>bubble</code>，就生成一幅气泡图。</p>
<pre class="r"><code>echartr(mtcars, wt, mpg, am, weight=gear, type=&#39;bubble&#39;)</code></pre>
<div id="echarts-d33143374d24b2ddb71a5e31b8b0d6e55ef9502f" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-d33143374d24b2ddb71a5e31b8b0d6e55ef9502f">{"x":{"series":[{"name":"0","type":"scatter","data":[[3.215,21.4,3],[3.44,18.7,3],[3.46,18.1,3],[3.57,14.3,3],[3.19,24.4,4],[3.15,22.8,4],[3.44,19.2,4],[3.44,17.8,4],[4.07,16.4,3],[3.73,17.3,3],[3.78,15.2,3],[5.25,10.4,3],[5.424,10.4,3],[5.345,14.7,3],[2.465,21.5,3],[3.52,15.5,3],[3.435,15.2,3],[3.84,13.3,3],[3.845,19.2,3]],"symbolSize":"function (value){\n                return 4*Math.round(Math.abs(value[2]/3));\n                }"},{"name":"1","type":"scatter","data":[[2.62,21,4],[2.875,21,4],[2.32,22.8,4],[2.2,32.4,4],[1.615,30.4,4],[1.835,33.9,4],[1.935,27.3,4],[2.14,26,5],[1.513,30.4,5],[3.17,15.8,5],[2.77,19.7,5],[3.57,15,5],[2.78,21.4,4]],"symbolSize":"function (value){\n                return 4*Math.round(Math.abs(value[2]/3));\n                }"}],"legend":{"show":true,"data":["0","1"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["series.0.symbolSize","series.1.symbolSize","tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="special-notes" class="section level3">
<h3><span class="header-section-number">3.2.3</span> 特别注意Special Notes</h3>
<div id="param-list" class="section level4">
<h4><span class="header-section-number">3.2.3.1</span> 参数列表Param List</h4>
<p>输入参数列表的格式包括</p>
<ul>
<li>表达式: <code>wt</code>、<code>mpg</code> 甚至复杂如<code>factor(am, labels=c('Automatic', 'Mannual'))</code></li>
<li>文本: <code>'wt'</code>、<code>'mpg'</code></li>
<li>公式: <code>~wt</code>、<code>~mpg</code></li>
</ul>
</div>
<div id="data-requirements" class="section level4">
<h4><span class="header-section-number">3.2.3.2</span> 数据要求Data Requirements</h4>
<p>数据必须以数据框形式传入。数据系列和时间轴会以<code>series</code>和<code>z</code>变量的原始顺序排序。所以作图前，必须先对数据框进行相应的排序，以确保作出的图里，图例和时间轴以正确的顺序显示。</p>
<p>用到时间轴(<code>z</code>)时，务必格外小心。<code>x</code>、<code>y</code>、<code>series</code>、<code>weight</code>变量一旦用到，就要确保每个<code>z</code>水平上，这些变量都完备地排列组合了。否则你会发现各组图形在时间轴上莫名其妙地重叠呈现。</p>
<p>对<code>series</code>要特别留意，因为在单坐标系（如直角坐标系）和多坐标系（如极坐标系）中，series的作用是不同的。在前一种情形下，<code>series</code>指数据系列。但在后一种情形下，<code>series</code>指的是坐标系索引，而<code>x[,2]</code>才指数据系列。这样设计是因为<code>type</code>和<code>subtype</code>固定映射到<code>series</code>向量，而在多坐标系图中，用户通常倾向于把不同的图类/亚类映射到多个不同的图，而不是数据系列。</p>
</div>
<div id="typesubtype" class="section level4">
<h4><span class="header-section-number">3.2.3.3</span> 图类和亚类Type/Subtype</h4>
<p><code>recharts</code>在某些情况下支持混合作图，比如柱图和线图。</p>
<pre class="r"><code>d &lt;- data.table::dcast(mtcars, carb+gear~., mean, value.var=&#39;mpg&#39;)
names(d)[3] &lt;- &#39;mean.mpg&#39;
d$carb &lt;- as.character(d$carb)
echartr(d, carb, &quot;mean.mpg&quot;, gear, type=c(&#39;vbar&#39;, &#39;vbar&#39;, &#39;line&#39;)) %&gt;% 
    setSymbols(&#39;emptycircle&#39;)</code></pre>
<div id="echarts-c59688f5a399887d74a54af3c105cd4aeebe4a7a" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-c59688f5a399887d74a54af3c105cd4aeebe4a7a">{"x":{"series":[{"name":"3","type":"bar","data":[20.3333333333333,17.15,16.3,12.62,"-","-"]},{"name":"4","type":"bar","data":[29.1,24.75,"-",19.75,"-","-"]},{"name":"5","type":"line","data":["-",28.2,"-",15.8,19.7,15]}],"legend":{"show":true,"data":["3","4","5"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mean.mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"category","show":true,"position":"bottom","name":"carb","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false},"data":["1","2","3","4","6","8"]}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"shadow","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n       var i;\n       var j;\n       var text;\n       var text1;\n       var sName = \"\";\n       if (params.length > 1){\n            if (params[0].value.length >1) {\n                text1 = params[0].value[0];\n            } else {\n                text1 = params[0].value;\n            }\n            text = params[0].name;\n            if (params[0].seriesName) {\n                sName = params[0].seriesName;\n            }\n       } else {\n            if (params.value.length > 1) {\n                text1 = params.value[0];\n            } else {\n                text1 = params.value\n            }\n            text = params.name;\n            if (params.seriesName) {\n                sName = params.seriesName;\n            }\n       }\n       if (params.length > 1){\n           text += \"<br/>\" + params[0].seriesName + \" :  \" + text1;\n           if (params[0].value.length > 1){\n                for (j = 1; j < params[0].value.length; j++){\n                    text += \", \" + params[0].value[j];\n                }\n           }\n           for (i = 1; i < params.length; i++) {\n                if (params[i].value.length > 1){\n                   text += \"<br/>\" + params[i].seriesName + \" :  \"\n                        + params[i].value[0];\n                   for (j = 1; j < params[i].value.length; j++){\n                        text += \", \" + params[i].value[j];\n                   }\n                } else {\n                   text += \"<br/>\" + params[i].seriesName + \" :  \"\n                        + params[i].value;\n                }\n           }\n       } else {\n           if (params.seriesName){\n               text += \"<br/>\" + params.seriesName + \" :  \" + text1;\n               if (params.value.length > 1){\n                    for (j = 1; j < params.value.length; j++){\n                        text += \", \" + params.value[j];\n                    }\n               }\n           } else {\n               text = text1;\n               if (params.value.length > 1){\n                    for (j = 1; j < params.value.length; j++){\n                        text += \", \" + params.value[j];\n                    }\n               }\n           }\n       }\n       return text;\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":true,"type":["line","bar","tiled","stack"]},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"symbolList":["emptyCircle","emptyCircle","emptyCircle"]},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p>也可以混合亚类。参见<code>recharts:::validChartTypes</code>的<code>subtype</code>列。你可以用’+‘、’_‘或’|’组合多个亚类，比如’stack+smooth’可以用来生成堆积平滑线图。</p>
<pre class="r"><code>echartr(d, carb, mean.mpg, gear, type=&#39;line&#39;, 
        subtype=c(&#39;stack + smooth&#39;, &#39;stack + dotted&#39;, &#39;smooth + dashed&#39;)) %&gt;%
    setSymbols(&#39;emptycircle&#39;)</code></pre>
<div id="echarts-c71281ba920afe8c3b86f27b8b26fa9ddb0e1eb3" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-c71281ba920afe8c3b86f27b8b26fa9ddb0e1eb3">{"x":{"series":[{"name":"3","type":"line","data":[20.3333333333333,17.15,16.3,12.62,"-","-"],"stack":"Group","smooth":true,"showAllSymbol":true,"symbolSize":0},{"name":"4","type":"line","data":[29.1,24.75,"-",19.75,"-","-"],"stack":"Group","itemStyle":{"normal":{"lineStyle":{"type":"dotted"}}},"showAllSymbol":true,"symbolSize":0},{"name":"5","type":"line","data":["-",28.2,"-",15.8,19.7,15],"itemStyle":{"normal":{"lineStyle":{"type":"dashed"}}},"showAllSymbol":true,"symbolSize":0}],"legend":{"show":true,"data":["3","4","5"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mean.mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"category","show":true,"position":"bottom","name":"carb","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false},"data":["1","2","3","4","6","8"]}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"line","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n       var i;\n       var j;\n       var text;\n       var text1;\n       var sName = \"\";\n       if (params.length > 1){\n            if (params[0].value.length >1) {\n                text1 = params[0].value[0];\n            } else {\n                text1 = params[0].value;\n            }\n            text = params[0].name;\n            if (params[0].seriesName) {\n                sName = params[0].seriesName;\n            }\n       } else {\n            if (params.value.length > 1) {\n                text1 = params.value[0];\n            } else {\n                text1 = params.value\n            }\n            text = params.name;\n            if (params.seriesName) {\n                sName = params.seriesName;\n            }\n       }\n       if (params.length > 1){\n           text += \"<br/>\" + params[0].seriesName + \" :  \" + text1;\n           if (params[0].value.length > 1){\n                for (j = 1; j < params[0].value.length; j++){\n                    text += \", \" + params[0].value[j];\n                }\n           }\n           for (i = 1; i < params.length; i++) {\n                if (params[i].value.length > 1){\n                   text += \"<br/>\" + params[i].seriesName + \" :  \"\n                        + params[i].value[0];\n                   for (j = 1; j < params[i].value.length; j++){\n                        text += \", \" + params[i].value[j];\n                   }\n                } else {\n                   text += \"<br/>\" + params[i].seriesName + \" :  \"\n                        + params[i].value;\n                }\n           }\n       } else {\n           if (params.seriesName){\n               text += \"<br/>\" + params.seriesName + \" :  \" + text1;\n               if (params.value.length > 1){\n                    for (j = 1; j < params.value.length; j++){\n                        text += \", \" + params.value[j];\n                    }\n               }\n           } else {\n               text = text1;\n               if (params.value.length > 1){\n                    for (j = 1; j < params.value.length; j++){\n                        text += \", \" + params.value[j];\n                    }\n               }\n           }\n       }\n       return text;\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":true,"type":["line","bar","tiled","stack"]},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"symbolList":["emptyCircle","emptyCircle","emptyCircle"]},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="modify-the-chart" class="section level2">
<h2><span class="header-section-number">3.3</span> 修改作图Modify the Chart</h2>
<p>你可以将基本图形存为一个对象，然后不断修改它，并把这些修改用<code>%&gt;%</code>串联起来。</p>
<pre class="r"><code>g = echartr(mtcars, wt, mpg, factor(am, labels=c(&#39;Automatic&#39;, &#39;Manual&#39;)))</code></pre>
<div id="tune-series" class="section level3">
<h3><span class="header-section-number">3.3.1</span> 调整Tune Series</h3>
<p>上述命令创建了一个Echarts对象<code>g</code>，包含两个数据系列：‘Automatic’和’Manual’。<code>g</code>作为一个列表，其数据结构为：</p>
<pre><code>- x
    - series
        - list 1
            - name: &#39;Automatic&#39;
            - data: ...
            - type: &#39;scatter&#39;
        - list 2
            - name: &#39;Manual&#39;
            - data: ...
            - type: &#39;scatter&#39;
    - legend
    - xAxis
    - yAxis
    - tooltip
    ...</code></pre>
<p>如果你想直接修改数据系列的定义，可以调用低阶函数<code>setSeries</code>。</p>
<p>我们把’Manual’系列(索引号为2)的symbolSize改为8，symbolRotate改为30。</p>
<pre class="r"><code>g %&gt;% setSeries(series=2, symbolSize=8, symbolRotate=30)</code></pre>
<div id="echarts-9898780d7f158330f7bfd6cded8adcb9a9e61c68" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-9898780d7f158330f7bfd6cded8adcb9a9e61c68">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]],"symbolSize":8,"symbolRotate":30}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="markline" class="section level3">
<h3><span class="header-section-number">3.3.2</span> 标注线markLine</h3>
<p>给两个数据系列分别添加各自的均数标注线。</p>
<pre class="r"><code>g %&gt;% addMarkLine(data=data.frame(type=&#39;average&#39;, name1=&#39;Avg&#39;))</code></pre>
<div id="echarts-e4c8dff8a924f483121249dabf49d35de49f13e1" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-e4c8dff8a924f483121249dabf49d35de49f13e1">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]],"markLine":{"data":[{"name":"Avg","type":"average"}],"clickable":true,"symbol":["circle","arrow"],"smooth":false,"symbolSize":[2,4],"large":false,"effect":{"show":false},"smoothness":0.2,"precision":2,"bundling":{"enable":false,"maxTurningAngle":45}}},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]],"markLine":{"data":[{"name":"Avg","type":"average"}],"clickable":true,"symbol":["circle","arrow"],"smooth":false,"symbolSize":[2,4],"large":false,"effect":{"show":false},"smoothness":0.2,"precision":2,"bundling":{"enable":false,"maxTurningAngle":45}}}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="markpoint" class="section level3">
<h3><span class="header-section-number">3.3.3</span> 标注点markPoint</h3>
<p>给第一个数据系列(‘Automatic’)标出最大值的点。</p>
<pre class="r"><code>g %&gt;% addMarkPoint(series=1, data=data.frame(type=&#39;max&#39;, name=&#39;Max&#39;))</code></pre>
<div id="echarts-228d1c7e9b5afcd63bfb23143f1121d381e91734" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-228d1c7e9b5afcd63bfb23143f1121d381e91734">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]],"markPoint":{"data":[{"name":"Max","type":"max"}],"clickable":true,"symbol":"pin","symbolSize":10,"large":false,"effect":{"show":false}}},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p>该命令也可以写作</p>
<pre class="r"><code>g %&gt;% addMarkPoint(series=&#39;Automatic&#39;, data=data.frame(type=&#39;max&#39;, name=&#39;Max&#39;))</code></pre>
</div>
<div id="title" class="section level3">
<h3><span class="header-section-number">3.3.4</span> 标题Title</h3>
<p>添加标题(红色)和副标题(超级链接到 <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html</a>)。</p>
<pre class="r"><code>link &lt;- &#39;https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html&#39;
g %&gt;% setTitle(&#39;wt vs mpg&#39;, paste0(&#39;[Motor Trend](&#39;, link, &#39;)&#39;), 
               textStyle=list(color=&#39;red&#39;))</code></pre>
<div id="echarts-0f48e5327a353bcfaf0c60ee2973bfdb85a95d68" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-0f48e5327a353bcfaf0c60ee2973bfdb85a95d68">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"title":{"text":"wt vs mpg","subtext":"Motor Trend","sublink":"https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html","x":"center","y":"bottom","orient":"horizontal","textStyle":{"color":"red"}}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="legend" class="section level3">
<h3><span class="header-section-number">3.3.5</span> 图例Legend</h3>
<p>修改图例(柠檬色)，初始化时只选中第一系列(‘Automatic’)。</p>
<pre class="r"><code>g %&gt;% setLegend(selected=&#39;Automatic&#39;, textStyle=list(color=&#39;lime&#39;))</code></pre>
<div id="echarts-4ee090e6955f877d6e97dc4690114f83eb71b21a" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-4ee090e6955f877d6e97dc4690114f83eb71b21a">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal","selected":{"Manual":false},"selectedMode":"single","textStyle":{"color":"lime"}},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="toolbox" class="section level3">
<h3><span class="header-section-number">3.3.6</span> 工具箱Toolbox</h3>
<p>修改工具箱显示语言为英文，并置于交互图右上角，垂直显示。</p>
<pre class="r"><code>g %&gt;% setToolbox(lang=&#39;en&#39;, pos=2)</code></pre>
<div id="echarts-ea6b8e08a087f353565001a2bf5259abcfc13cb0" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-ea6b8e08a087f353565001a2bf5259abcfc13cb0">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true,"title":{"mark":"Apply Auxiliary Conductor","markUndo":"Undo Auxiliary Conductor","markClear":"Clear Auxiliary Conductor"}},"dataZoom":{"show":true,"title":{"dataZoom":"Data Zoom","dataZoomReset":"Reset Data Zoom"}},"dataView":{"show":true,"readOnly":false,"title":"Data View","lang":["Data View","Close","Refresh"]},"magicType":{"show":false},"restore":{"show":true,"title":"Restore"},"saveAsImage":{"show":true,"title":"Save As Image","lang":"Click to Save"}},"x":"right","y":"top","orient":"vertical"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="datazoom" class="section level3">
<h3><span class="header-section-number">3.3.7</span> 数据缩放漫游DataZoom</h3>
<p>添加缩放漫游控件(初始时不显示).</p>
<pre class="r"><code>g %&gt;% setDataZoom()</code></pre>
<div id="echarts-14654eb2bdb07356317d8a034420d99d6d39effb" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-14654eb2bdb07356317d8a034420d99d6d39effb">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"dataZoom":{"show":true,"orient":"horizontal","height":30,"x":80}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="axis" class="section level3">
<h3><span class="header-section-number">3.3.8</span> 坐标轴Axis</h3>
<p>调整坐标轴，使x-和y-坐标交叉于零点。</p>
<pre class="r"><code>g %&gt;% setXAxis(min=0) %&gt;% setYAxis(min=0)</code></pre>
<div id="echarts-61c8b438d63531f5c2e88a7f53d477677145d9ef" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-61c8b438d63531f5c2e88a7f53d477677145d9ef">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false},"min":0}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false},"min":0}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"}},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div id="fortify-the-chart" class="section level2">
<h2><span class="header-section-number">3.4</span> 美化Fortify the Chart</h2>
<div id="theme" class="section level3">
<h3><span class="header-section-number">3.4.1</span> 主题Theme</h3>
<p>使用’dark’主题。可以选择的自带主题包括“macarons”, “infographic”, “blue”, “dark”, “gray”, “green”, “helianthus”, “macarons2”, “mint”, “red”, “roma”, “sakura”, “shine”, 和 “vintage”。</p>
<p>拖曳重算(Calculable)是Echarts特有的交互方式。在某些图(如饼图)中，效果比较好。</p>
<pre class="r"><code>g %&gt;% setTheme(&#39;dark&#39;, calculable=TRUE)</code></pre>
<div id="echarts-24811664faeb8c81e1f68e5d3b08ea442be34b72" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-24811664faeb8c81e1f68e5d3b08ea442be34b72">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"theme":"dark","calculable":true},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
<div id="symbols" class="section level3">
<h3><span class="header-section-number">3.4.2</span> 图标Symbols</h3>
<p>把第1系列(‘Automatic’)的图标改为’heart’，第2系列(‘Manual’)的图标改为’star6’。</p>
<pre class="r"><code>g %&gt;% setSymbols(c(&#39;heart&#39;, &#39;star6&#39;))</code></pre>
<div id="echarts-7bf40999725fd587b8c8a5cfde4a4369a48013ac" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-7bf40999725fd587b8c8a5cfde4a4369a48013ac">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]]},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]]}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal"},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true},"dataZoom":{"show":true},"dataView":{"show":true,"readOnly":false},"magicType":{"show":false},"restore":{"show":true},"saveAsImage":{"show":true}},"x":"right","y":"top","orient":"horizontal"},"symbolList":["heart","star6"]},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
</div>
</div>
<div id="altogether" class="section level2">
<h2><span class="header-section-number">3.5</span> 合起来Altogether</h2>
<p>你可以把上述步骤用%&gt;%合起来。如果你对JavaScript很熟悉，你可以把JavaScript片段包在<code>JS()</code>函数中，以获得更好的效果。</p>
<pre class="r"><code>g %&gt;% setSeries(series=2, symbolSize=8, symbolRotate=30) %&gt;% 
    addMarkLine(data=data.frame(type=&#39;average&#39;, name1=&#39;Avg&#39;)) %&gt;%
    addMarkPoint(series=1, data=data.frame(type=&#39;max&#39;, name=&#39;Max&#39;)) %&gt;%
    setTitle(&#39;wt vs mpg&#39;, paste0(&#39;[Motor Trend](&#39;, link, &#39;)&#39;), 
               textStyle=list(color=&#39;red&#39;)) %&gt;%
    setLegend(selected=&#39;Automatic&#39;, textStyle=list(color=&#39;lime&#39;)) %&gt;%
    setToolbox(lang=&#39;en&#39;, pos=2) %&gt;% setDataZoom() %&gt;% 
    setTheme(&#39;dark&#39;, calculable=TRUE) %&gt;% setSymbols(c(&#39;heart&#39;, &#39;star6&#39;))</code></pre>
<div id="echarts-2177005d31324830f6f34f8563a1f0376ea31981" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="echarts-2177005d31324830f6f34f8563a1f0376ea31981">{"x":{"series":[{"name":"Automatic","type":"scatter","data":[[3.215,21.4],[3.44,18.7],[3.46,18.1],[3.57,14.3],[3.19,24.4],[3.15,22.8],[3.44,19.2],[3.44,17.8],[4.07,16.4],[3.73,17.3],[3.78,15.2],[5.25,10.4],[5.424,10.4],[5.345,14.7],[2.465,21.5],[3.52,15.5],[3.435,15.2],[3.84,13.3],[3.845,19.2]],"markLine":{"data":[{"name":"Avg","type":"average"}],"clickable":true,"symbol":["circle","arrow"],"smooth":false,"symbolSize":[2,4],"large":false,"effect":{"show":false},"smoothness":0.2,"precision":2,"bundling":{"enable":false,"maxTurningAngle":45}},"markPoint":{"data":[{"name":"Max","type":"max"}],"clickable":true,"symbol":"pin","symbolSize":10,"large":false,"effect":{"show":false}}},{"name":"Manual","type":"scatter","data":[[2.62,21],[2.875,21],[2.32,22.8],[2.2,32.4],[1.615,30.4],[1.835,33.9],[1.935,27.3],[2.14,26],[1.513,30.4],[3.17,15.8],[2.77,19.7],[3.57,15],[2.78,21.4]],"symbolSize":8,"symbolRotate":30,"markLine":{"data":[{"name":"Avg","type":"average"}],"clickable":true,"symbol":["circle","arrow"],"smooth":false,"symbolSize":[2,4],"large":false,"effect":{"show":false},"smoothness":0.2,"precision":2,"bundling":{"enable":false,"maxTurningAngle":45}}}],"legend":{"show":true,"data":["Automatic","Manual"],"x":"left","y":"top","orient":"horizontal","selected":{"Manual":false},"selectedMode":"single","textStyle":{"color":"lime"}},"yAxis":[{"type":"value","show":true,"position":"left","name":"mpg","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"xAxis":[{"type":"value","show":true,"position":"bottom","name":"wt","nameLocation":"end","boundaryGap":[0,0],"scale":true,"axisLine":{"show":true,"onZero":false},"axisTick":{"show":false},"axisLabel":{"show":true},"splitLine":{"show":true},"splitArea":{"show":false}}],"tooltip":{"show":true,"trigger":"axis","axisPointer":{"type":"cross","crossStyle":{"type":"dashed"},"lineStyle":{"type":"solid","width":1},"shadowStyle":{"color":"rgba(150,150,150,0.3)","width":"auto","type":"default"}},"textStyle":{"color":"#fff"},"formatter":"function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \"\"){\n        if (params.value.length > 1) {\n            for (i = 1; i < params.value.length; i++){\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \" : \" + text;\n        }\n    } else {\n        if (params.value.length > 1) {\n            text = params.seriesName + \" :<br/>\" + text;\n            for (i = 1; i < params.value.length; i++) {\n                text += \" ,    \" + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \" :<br/>\"\n            + params.name + \" : \" + text;\n        }\n    }\n    }","islandFormatter":"{a} < br/>{b} : {c}","enterable":false,"showDelay":20,"hideDelay":100,"transitionDuration":0.4,"backgroundColor":"rgba(0,0,0,0.7)","borderColor":"#333","borderWidth":0,"borderRadius":4},"toolbox":{"show":true,"feature":{"mark":{"show":true,"title":{"mark":"Apply Auxiliary Conductor","markUndo":"Undo Auxiliary Conductor","markClear":"Clear Auxiliary Conductor"}},"dataZoom":{"show":true,"title":{"dataZoom":"Data Zoom","dataZoomReset":"Reset Data Zoom"}},"dataView":{"show":true,"readOnly":false,"title":"Data View","lang":["Data View","Close","Refresh"]},"magicType":{"show":false},"restore":{"show":true,"title":"Restore"},"saveAsImage":{"show":true,"title":"Save As Image","lang":"Click to Save"}},"x":"right","y":"top","orient":"vertical"},"title":{"text":"wt vs mpg","subtext":"Motor Trend","sublink":"https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html","x":"center","y":"bottom","orient":"horizontal","textStyle":{"color":"red"}},"dataZoom":{"show":true,"orient":"horizontal","height":30,"y2":50,"y":"document.getElementById('echarts-2177005d31324830f6f34f8563a1f0376ea31981').offsetHeight - 80","x":80},"grid":{"y2":110},"theme":"dark","calculable":true,"symbolList":["heart","star6"]},"evals":["tooltip.formatter","dataZoom.y"],"jsHooks":[]}</script>
</div>
</div>
<div id="low-level-api" class="section level1">
<h1><span class="header-section-number">4</span> Low-level API</h1>
<div id="de-novo" class="section level2">
<h2><span class="header-section-number">4.1</span> 从头创建De Novo</h2>
<p>虽然ECharts支持很多种图，但要娴熟地用<code>echartr()</code>创建它们仍可能花不少时间。 所以recharts也为list提供了一个低级的S3方法实现。由于ECharts的主要用法是传入一个JavaScript对象给<code>.setOption()</code>方法，而在R中，这样一个对象是用list构建的。所以<code>echart.list()</code>这个低级方法能让用户任意创建自定义图形。下面是一个简单的和弦图的例子，取材于http://echarts.baidu.com/echarts2/doc/example/chord1.html：</p>
<pre class="r"><code>chordEx1 = list(
  title = list(
    text = &#39;测试数据&#39;,
    subtext = &#39;From d3.js&#39;,
    x = &#39;right&#39;,
    y = &#39;bottom&#39;
  ),
  tooltip = list(
    trigger = &#39;item&#39;,
    formatter = JS(&#39;function(params) {
      if (params.indicator2) { // is edge
        return params.value.weight;
      } else {// is node
        return params.name
      }
    }&#39;)
  ),
  toolbox = list(
    show = TRUE,
    feature = list(
      restore = list(show = TRUE),
      magicType = list(show = TRUE, type = c(&#39;force&#39;, &#39;chord&#39;)),
      saveAsImage = list(show = TRUE)
    )
  ),
  legend = list(
    x = &#39;left&#39;,
    data = c(&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;, &#39;group4&#39;)
  ),
  series = list(
    list(
      type = &#39;chord&#39;,
      sort = &#39;ascending&#39;,
      sortSub = &#39;descending&#39;,
      showScale = TRUE,
      showScaleText = TRUE,
      data = list(
        list(name = &#39;group1&#39;),
        list(name = &#39;group2&#39;),
        list(name = &#39;group3&#39;),
        list(name = &#39;group4&#39;)
      ),
      itemStyle = list(
        normal = list(
          label = list(show = FALSE)
        )
      ),
      matrix = rbind(
        c(11975,  5871, 8916, 2868),
        c( 1951, 10048, 2060, 6171),
        c( 8010, 16145, 8090, 8045),
        c( 1013,   990,  940, 6907)
      )
    )
  )
)

echart(chordEx1)</code></pre>
<div id="htmlwidget-832d5a93d78743c99c92" style="width:672px;height:480px;" class="echarts html-widget"></div>
<script type="application/json" data-for="htmlwidget-832d5a93d78743c99c92">{"x":{"title":{"text":"测试数据","subtext":"From d3.js","x":"right","y":"bottom"},"tooltip":{"trigger":"item","formatter":"function(params) {\n      if (params.indicator2) { // is edge\n        return params.value.weight;\n      } else {// is node\n        return params.name\n      }\n    }"},"toolbox":{"show":true,"feature":{"restore":{"show":true},"magicType":{"show":true,"type":["force","chord"]},"saveAsImage":{"show":true}}},"legend":{"x":"left","data":["group1","group2","group3","group4"]},"series":[{"type":"chord","sort":"ascending","sortSub":"descending","showScale":true,"showScaleText":true,"data":[{"name":"group1"},{"name":"group2"},{"name":"group3"},{"name":"group4"}],"itemStyle":{"normal":{"label":{"show":false}}},"matrix":[[11975,5871,8916,2868],[1951,10048,2060,6171],[8010,16145,8090,8045],[1013,990,940,6907]]}]},"evals":["tooltip.formatter"],"jsHooks":[]}</script>
<p>显然，上述例子就是把<a href="http://echarts.baidu.com/doc/example/chord1.html">原例子</a>中的JavaScript对象翻译成了R对象。注意，我们是用<strong>htmlwidgets</strong>中的<code>JS()</code>函数翻译了<code>tooltip.fomatter</code>函数。其他所有对象都可以自然地映射到R。</p>
</div>
<div id="echartsmodify-the-echarts-object" class="section level2">
<h2><span class="header-section-number">4.2</span> 修改Echarts对象Modify the Echarts Object</h2>
<p>如果熟悉Echarts的数据结构，我们也可以用<code>echartr</code>创建Echarts对象，然后直接修改它，就如同修改其他S3 list一样。</p>
<p>下面是Echarts对象<code>g</code>的数据结构。<code>g</code>是通过命令<code>echartr(mtcars, wt, mpg, factor(am, labels=c('Automatic', 'Mannual')))</code>创建出来的。</p>
<pre class="r"><code>enquote(g)</code></pre>
<pre><code>## quote(list(x = list(series = list(list(name = &quot;Automatic&quot;, type = &quot;scatter&quot;, 
##     data = list(list(3.215, 21.4), list(3.44, 18.7), list(3.46, 
##         18.1), list(3.57, 14.3), list(3.19, 24.4), list(3.15, 
##         22.8), list(3.44, 19.2), list(3.44, 17.8), list(4.07, 
##         16.4), list(3.73, 17.3), list(3.78, 15.2), list(5.25, 
##         10.4), list(5.424, 10.4), list(5.345, 14.7), list(2.465, 
##         21.5), list(3.52, 15.5), list(3.435, 15.2), list(3.84, 
##         13.3), list(3.845, 19.2))), list(name = &quot;Manual&quot;, type = &quot;scatter&quot;, 
##     data = list(list(2.62, 21), list(2.875, 21), list(2.32, 22.8), 
##         list(2.2, 32.4), list(1.615, 30.4), list(1.835, 33.9), 
##         list(1.935, 27.3), list(2.14, 26), list(1.513, 30.4), 
##         list(3.17, 15.8), list(2.77, 19.7), list(3.57, 15), list(
##             2.78, 21.4)))), legend = list(show = TRUE, data = list(
##     &quot;Automatic&quot;, &quot;Manual&quot;), x = &quot;left&quot;, y = &quot;top&quot;, orient = &quot;horizontal&quot;), 
##     yAxis = list(list(type = &quot;value&quot;, show = TRUE, position = &quot;left&quot;, 
##         name = &quot;mpg&quot;, nameLocation = &quot;end&quot;, boundaryGap = c(0, 
##         0), scale = TRUE, axisLine = list(show = TRUE, onZero = FALSE), 
##         axisTick = list(show = FALSE), axisLabel = list(show = TRUE), 
##         splitLine = list(show = TRUE), splitArea = list(show = FALSE))), 
##     xAxis = list(list(type = &quot;value&quot;, show = TRUE, position = &quot;bottom&quot;, 
##         name = &quot;wt&quot;, nameLocation = &quot;end&quot;, boundaryGap = c(0, 
##         0), scale = TRUE, axisLine = list(show = TRUE, onZero = FALSE), 
##         axisTick = list(show = FALSE), axisLabel = list(show = TRUE), 
##         splitLine = list(show = TRUE), splitArea = list(show = FALSE))), 
##     tooltip = list(show = TRUE, trigger = &quot;axis&quot;, axisPointer = list(
##         type = &quot;cross&quot;, crossStyle = list(type = &quot;dashed&quot;), lineStyle = list(
##             type = &quot;solid&quot;, width = 1), shadowStyle = list(color = &quot;rgba(150,150,150,0.3)&quot;, 
##             width = &quot;auto&quot;, type = &quot;default&quot;)), textStyle = list(
##         color = &quot;#fff&quot;), formatter = &quot;function (params) {\n    var i;\n    var text = params.value[0];\n    if (params.seriesName === null || params.seriesName === \&quot;\&quot;){\n        if (params.value.length &gt; 1) {\n            for (i = 1; i &lt; params.value.length; i++){\n                text += \&quot; ,    \&quot; + params.value[i];\n            }\n            return text;\n        } else {\n            return params.name + \&quot; : \&quot; + text;\n        }\n    } else {\n        if (params.value.length &gt; 1) {\n            text = params.seriesName + \&quot; :&lt;br/&gt;\&quot; + text;\n            for (i = 1; i &lt; params.value.length; i++) {\n                text += \&quot; ,    \&quot; + params.value[i];\n            }\n            return text;\n        } else {\n            return params.seriesName + \&quot; :&lt;br/&gt;\&quot;\n            + params.name + \&quot; : \&quot; + text;\n        }\n    }\n    }&quot;, 
##         islandFormatter = &quot;{a} &lt; br/&gt;{b} : {c}&quot;, enterable = FALSE, 
##         showDelay = 20, hideDelay = 100, transitionDuration = 0.4, 
##         backgroundColor = &quot;rgba(0,0,0,0.7)&quot;, borderColor = &quot;#333&quot;, 
##         borderWidth = 0, borderRadius = 4), toolbox = list(show = TRUE, 
##         feature = list(mark = list(show = TRUE), dataZoom = list(
##             show = TRUE), dataView = list(show = TRUE, readOnly = FALSE), 
##             magicType = list(show = FALSE), restore = list(show = TRUE), 
##             saveAsImage = list(show = TRUE)), x = &quot;right&quot;, y = &quot;top&quot;, 
##         orient = &quot;horizontal&quot;)), width = NULL, height = NULL, 
##     sizingPolicy = list(defaultWidth = NULL, defaultHeight = NULL, 
##         padding = NULL, viewer = list(defaultWidth = NULL, defaultHeight = NULL, 
##             padding = NULL, fill = TRUE, suppress = FALSE, paneHeight = NULL), 
##         browser = list(defaultWidth = NULL, defaultHeight = NULL, 
##             padding = NULL, fill = FALSE), knitr = list(defaultWidth = NULL, 
##             defaultHeight = NULL, figure = TRUE)), dependencies = list(
##         list(name = &quot;echarts-module&quot;, version = &quot;2.2.7&quot;, src = list(
##             file = &quot;/home/madlogos/R/x86_64-pc-linux-gnu-library/3.3/recharts/htmlwidgets/lib/echarts&quot;), 
##             meta = NULL, script = &quot;base.js&quot;, stylesheet = NULL, 
##             head = NULL, attachment = NULL, all_files = TRUE), 
##         list(name = &quot;echarts-module&quot;, version = &quot;2.2.7&quot;, src = list(
##             file = &quot;/home/madlogos/R/x86_64-pc-linux-gnu-library/3.3/recharts/htmlwidgets/lib/echarts&quot;), 
##             meta = NULL, script = &quot;scatter.js&quot;, stylesheet = NULL, 
##             head = NULL, attachment = NULL, all_files = TRUE)), 
##     elementId = &quot;echarts-534e55945f87d50b7e08ae5383d568c0888827e5&quot;, 
##     preRenderHook = NULL, jsHooks = list()))</code></pre>
</div>
</div>
<div id="finale" class="section level1">
<h1><span class="header-section-number">5</span> 结语Finale</h1>
<p>通常我们不希望R用户写那么长的选项列表。R用户一般更熟悉（也更常用到）诸如数据框、矩阵、表格等数据结构，理想状态下，我们希望用户只要传入一些熟悉的数据对象，recharts自动地配置出ECharts对象来。目前离理想还有距离。但欢迎反馈您的体验和看法，也欢迎用<a href="https://github.com/madlogos/recharts">Github pull requests</a>贡献您的代码。</p>
</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
    // active menu
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === '') href = './';
    $('a[href="' + href + '"]').parent().addClass('active');
});
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
