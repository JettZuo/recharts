---
title: "控件Widget 22 - 图例Legend"
output: 
  html_document: 
    number_sections: yes
    toc: yes
    toc_depth: 4
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

首先，加载`recharts`:
```{r}
library(recharts)
```

# 介绍Introduction

图例默认放置于11点钟位。

建议用`chart %>% setLegend(...)`形式调用`setLegend`。

# 用法Function Call

所有函数名都有小驼峰法和小写连划线(Hadly Wickham推荐此法)两种形式。

```r
setLegend(chart, show = TRUE, pos = 11, selected = NULL, itemGap = 5,
  borderColor = "#ccc", borderWidth = 0, textStyle = list(color = "auto"),
  formatter = NULL, overideData = NULL, ...)

set_legend(chart, show = TRUE, pos = 11, selected = NULL, itemGap = 5,
  borderColor = "#ccc", borderWidth = 0, textStyle = list(color = "auto"),
  formatter = NULL, overideData = NULL, ...)
```

+-------------+----------------------------------------------------------------+
|   参数      |  要求                                        |
+=============+================================================================+
| **chart**   | `echartR`或`echart`创建的Echarts对象.   |
+-------------+----------------------------------------------------------------+
| show        | 逻辑型，是否显示图例。默认为TRUE。如要把图例部件整体从Echarts对象中移除，设为NULL. |
+-------------+----------------------------------------------------------------+
| pos         | 图例的时钟方位，默认为11，参见`vecPos`。也可以自定义方位向量`c(x, y, orient)`。 |
+-------------+----------------------------------------------------------------+
| selected    | 起始选中的数据系列名称向量  |
|             |               |
|             | - 单个系列名: 起始时选中单个系列，`selectedMode`也被设为'single' |
|             | - 多个系列名: 起始时选中多个系列，`selectedMode`被设为'multiple' |
|             | - 'none': 起始时不选中任何系列 |
+-------------+----------------------------------------------------------------+
| itemGap     | 图例标示的间距，默认为5px. |
+-------------+----------------------------------------------------------------+
| borderColor | 图例边框颜色，默认为'#ccc'. |
+-------------+----------------------------------------------------------------+
| borderWidth | 图例边框宽度，默认为0px (不显示). |
+-------------+----------------------------------------------------------------+
| textStyle   | 用于修饰图例文本样式的textStyle列表定义，如`list(color='#444')` or `list(color='auto')`. |
+-------------+----------------------------------------------------------------+
| formatter   | 格式模板或包含javascript代码片断的文本，如`'{name}'`. |
+-------------+----------------------------------------------------------------+
| overideData | 列表，覆写图例部件的数据，如`list(list(name='Series 1',` `icon='image://../asset/ico/favicon.png',` `textStyle=list(color='#bbb')))` |
+-------------+----------------------------------------------------------------+
| ...         | 省略号 |
+-------------+----------------------------------------------------------------+

# 举例Showcase

```{r}
g1 <- echartr(iris, Sepal.Width, Petal.Width, Species)
g2 <- echartr(iris, Sepal.Width, Petal.Width, t=Species)
```

<table>
<tr><td>
```{r}
g1 %>% setTheme(width=400, height=300)
```
</td><td>
```{r}
g2 %>% setTheme(width=400, height=300)
```
</td></tr>
</table>

起始时图例是显示的。可以将其关闭。
```{r}
g1 %>% setLegend(show=FALSE)
```

改变图例方位。
```{r}
g1 %>% setLegend(pos=12)
```

起始时选中第2系列 ('versicolor') ，`selectedMode`被置为'single'.
```{r}
g1 %>% setLegend(selected='versicolor')
```

Select nothing on load.
```{r}
g1 %>% setLegend(selected='none')
```

自定义其样式。
```{r}
g1 %>% setLegend(textStyle=textStyle(
    fontFamily='Times New Roman', color='purple', fontWeight='bold', 
    fontSize=16))
```

更精细地调整样式。

```{r}
g1 %>% setLegend(overideData=list(
    list(name='setosa', textStyle=textStyle(color='red')),
    list(name='versicolor', textStyle=textStyle(color='green')),
    list(name='virginica', textStyle=textStyle(color='blue'))))
```


# 参考资料

<http://echarts.baidu.com/echarts2/doc/option.html#title~title>
